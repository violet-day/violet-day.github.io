<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Nemo&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Nemo's Blog">
<meta property="og:url" content="http://violet-day.github.io/page/2/index.html">
<meta property="og:site_name" content="Nemo's Blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Nemo's Blog">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Nemo&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="https://avatars2.githubusercontent.com/u/5970246?v=3&amp;s=460">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">violet_day</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Ride The Lightning</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/violet-day" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/#" title="rss">rss</a>
					        
								<a class="mail" target="_blank" href="/violet_day@live.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Hibernate/" style="font-size: 10px;">Hibernate</a><a href="/tags/Navigation/" style="font-size: 10px;">Navigation</a><a href="/tags/SecureCRT/" style="font-size: 10px;">SecureCRT</a><a href="/tags/Tabs/" style="font-size: 10px;">Tabs</a><a href="/tags/aws/" style="font-size: 10px;">aws</a><a href="/tags/cordova/" style="font-size: 10px;">cordova</a><a href="/tags/eclipse/" style="font-size: 10px;">eclipse</a><a href="/tags/git/" style="font-size: 13.33px;">git</a><a href="/tags/gitflow/" style="font-size: 10px;">gitflow</a><a href="/tags/gitosis/" style="font-size: 10px;">gitosis</a><a href="/tags/ionic/" style="font-size: 16.67px;">ionic</a><a href="/tags/java/" style="font-size: 13.33px;">java</a><a href="/tags/linux/" style="font-size: 20px;">linux</a><a href="/tags/nginx/" style="font-size: 20px;">nginx</a><a href="/tags/node/" style="font-size: 20px;">node</a><a href="/tags/redis/" style="font-size: 10px;">redis</a><a href="/tags/side-menus/" style="font-size: 10px;">side menus</a><a href="/tags/strongloop/" style="font-size: 10px;">strongloop</a><a href="/tags/主键/" style="font-size: 10px;">主键</a><a href="/tags/全部变量/" style="font-size: 10px;">全部变量</a><a href="/tags/守护进程/" style="font-size: 10px;">守护进程</a><a href="/tags/负载均衡/" style="font-size: 10px;">负载均衡</a><a href="/tags/集合/" style="font-size: 10px;">集合</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">奥巴马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">卡卡的美丽传说</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">本泽马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">吉格斯的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">习大大大不同</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">托蒂的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我是谁，我从哪里来，我到哪里去？我就是我，是颜色不一样的吃货…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">violet_day</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="https://avatars2.githubusercontent.com/u/5970246?v=3&amp;s=460">
				<hgroup>
				  <h1 class="header-author">violet_day</h1>
				</hgroup>
			</div>
			
			<p class="header-subtitle">Ride The Lightning</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/violet-day" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/#" title="rss">rss</a>
			        
						<a class="mail" target="_blank" href="/violet_day@live.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-Ionic/Side Menus" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/08/10/Ionic/Side Menus/" class="article-date">
  	<time datetime="2014-08-10T10:24:51.000Z" itemprop="datePublished">8月 10 2014</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/10/Ionic/Side Menus/">Side Menus</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ion-side-menus">ion-side-menus</h2><p>Delegate: <code>$ionicSideMenuDelegate</code></p>
<p>包含侧滑菜单和主内容的容器。菜单可位于左边或右边，并且允许通过拖拽主内容来切换。</p>
<p>为了自动关闭菜单，您可以通过添加<code>menuClose</code>属性。<code>menu-close</code>通常被添加在<code>ion-side-menu</code>内容中links或button上，这样就可以通过点击对应的元素自动关闭侧滑菜单。</p>
<p>更多信息请查看</p>
<ul>
<li><code>ionSideMenuContent</code></li>
<li><code>ionSideMenu</code></li>
<li><code>menuClose</code></li>
</ul>
<h3 id="用法">用法</h3><p>使用侧滑菜单，需要添加父元素<code>&lt;ion-side-menus&gt;</code>，<code>&lt;ion-side-menu-content&gt;</code>作为中心内容区域，还有一个或多个<code>&lt;ion-side-menu&gt;</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">ion-side-menus</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Center content --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">ion-side-menu-content</span> <span class="attribute">ng-controller</span>=<span class="value">"ContentController"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">ion-side-menu-content</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Left menu --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">ion-side-menu</span> <span class="attribute">side</span>=<span class="value">"left"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">ion-side-menu</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Right menu --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">ion-side-menu</span> <span class="attribute">side</span>=<span class="value">"right"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">ion-side-menu</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ion-side-menus</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ContentController</span><span class="params">($scope, $ionicSideMenuDelegate)</span> </span>&#123;</span><br><span class="line">  $scope.toggleLeft = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    $ionicSideMenuDelegate.toggleLeft();</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="API">API</h3><table>
<thead>
<tr>
<th style="text-align:center">属性</th>
<th style="text-align:center">类型</th>
<th style="text-align:center">详细说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">delegate-handle(可选)</td>
<td style="text-align:center">string</td>
<td style="text-align:center">The handle used to identify this side menu with <code>$ionicSideMenuDelegate</code></td>
</tr>
</tbody>
</table>
<h2 id="ion-side-menu-content">ion-side-menu-content</h2><p>Child of <code>ionSideMenus</code></p>
<p>主要可见内容区域的容器，与<code>ionSideMenu</code>平级</p>
<h3 id="用法-1">用法</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">ion-side-menu-content</span></span><br><span class="line">  <span class="attribute">edge-drag-threshold</span>=<span class="value">"true"</span></span><br><span class="line">  <span class="attribute">drag-content</span>=<span class="value">"true"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ion-side-menu-content</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>更加完整的例子，请看<code>ionSideMenus</code></p>
<h3 id="API-1">API</h3><table>
<thead>
<tr>
<th style="text-align:center">属性</th>
<th style="text-align:center">类型</th>
<th style="text-align:center">详细说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">drag-content</td>
<td style="text-align:center">boolean</td>
<td style="text-align:center">内容区域是否可以被拖拽，默认为true</td>
</tr>
<tr>
<td style="text-align:center">edge-drag-threshold</td>
<td style="text-align:center">boolean,number</td>
<td style="text-align:center">内容区域的拖拽是否仅在小于屏幕边距一定阈值的范围内有效。默认为false。</td>
</tr>
</tbody>
</table>
<p>接受三种类型的数值    </p>
<ul>
<li>如果给定一个非零的数字，距离屏幕边距指定的像素允许拖拽</li>
<li>如果给定true，则默认25像素</li>
<li>如果给定false或者0，边距拖拽阈值无效，可以从内容区域的任何区域拖拽</li>
</ul>
<h2 id="ion-side-menu">ion-side-menu</h2><p>Child of <code>ionSideMenus</code></p>
<p>侧滑菜单的容器，与<code>ionSideMenuContent</code>平级。</p>
<h3 id="用法-2">用法</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">ion-side-menu</span></span><br><span class="line">  <span class="attribute">side</span>=<span class="value">"left"</span></span><br><span class="line">  <span class="attribute">width</span>=<span class="value">"myWidthValue + 20"</span></span><br><span class="line">  <span class="attribute">is-enabled</span>=<span class="value">"shouldLeftSideMenuBeEnabled()"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ion-side-menu</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>更加完整的例子，请看<code>ionSideMenus</code></p>
<h3 id="API-2">API</h3><table>
<thead>
<tr>
<th style="text-align:center">属性</th>
<th style="text-align:center">类型</th>
<th style="text-align:center">详细说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">side</td>
<td style="text-align:center">string</td>
<td style="text-align:center">菜单的位置，left或者right</td>
</tr>
<tr>
<td style="text-align:center">is-enabled(可选)</td>
<td style="text-align:center">boolean</td>
<td style="text-align:center">菜单是否可用</td>
</tr>
<tr>
<td style="text-align:center">width(可选)</td>
<td style="text-align:center">number</td>
<td style="text-align:center">菜单的宽度，默认275</td>
</tr>
</tbody>
</table>
<h2 id="menu-toggle">menu-toggle</h2><p>切换给定边的侧滑菜单</p>
<h3 id="用法-3">用法</h3><p>下方的示例是在nav bar中link。点击link就会自动打开给定的侧滑菜单<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">ion-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">ion-nav-buttons</span> <span class="attribute">side</span>=<span class="value">"left"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="title">button</span> <span class="attribute">menu-toggle</span>=<span class="value">"left"</span> <span class="attribute">class</span>=<span class="value">"button button-icon icon ion-navicon"</span>&gt;</span><span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">ion-nav-buttons</span>&gt;</span></span><br><span class="line"> ...</span><br><span class="line"><span class="tag">&lt;/<span class="title">ion-view</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="menu-close">menu-close</h2><p>关闭当前的侧滑菜单</p>
<h3 id="用法-4">用法</h3><p>下面的实例是在side menu中的link中，点击这个link则会自动关闭当前打开的菜单<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">a</span> <span class="attribute">menu-close</span> <span class="attribute">href</span>=<span class="value">"#/home"</span> <span class="attribute">class</span>=<span class="value">"item"</span>&gt;</span>Home<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="$ionicSideMenuDelegate">$ionicSideMenuDelegate</h2><p>Delegate for controlling the <code>ionSideMenus</code> directive.</p>
<p>通过<code>ionicSideMenuDelegate</code>服务调用的函数会控制所有的side menus。通过调用<code>$getByHandle</code>获取<code>ionSideMenus</code>实例。</p>
<h3 id="用法-5">用法</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">ng-controller</span>=<span class="value">"MainCtrl"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">ion-side-menus</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">ion-side-menu-content</span>&gt;</span></span><br><span class="line">      Content!</span><br><span class="line">      <span class="tag">&lt;<span class="title">button</span> <span class="attribute">ng-click</span>=<span class="value">"toggleLeftSideMenu()"</span>&gt;</span></span><br><span class="line">        Toggle Left Side Menu</span><br><span class="line">      <span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">ion-side-menu-content</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">ion-side-menu</span> <span class="attribute">side</span>=<span class="value">"left"</span>&gt;</span></span><br><span class="line">      Left Menu!</span><br><span class="line">    <span class="tag">&lt;<span class="title">ion-side-menu</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">ion-side-menus</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MainCtrl</span><span class="params">($scope, $ionicSideMenuDelegate)</span> </span>&#123;</span><br><span class="line">  $scope.toggleLeftSideMenu = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    $ionicSideMenuDelegate.toggleLeft();</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="方法">方法</h3><h4 id="toggleLeft([isOpen])">toggleLeft([isOpen])</h4><p>如果存在左侧滑菜单，则切换。</p>
<table>
<thead>
<tr>
<th style="text-align:center">参数名</th>
<th style="text-align:center">类型</th>
<th style="text-align:center">详细信息</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">isOpen(可选)</td>
<td style="text-align:center">boolean</td>
<td style="text-align:center">是否打开或关闭菜单，默认切换菜单。</td>
</tr>
</tbody>
</table>
<h4 id="toggleRight([isOpen])">toggleRight([isOpen])</h4><p>用法同<code>toggleLeft([isOpen])</code></p>
<h4 id="getOpenRatio()">getOpenRatio()</h4><p>返回已打开菜单的宽度占菜单宽度的比例。</p>
<ul>
<li>返回：<code>float</code>。没有任何打开则为0；左侧菜单打开或打开中为0至1之间，右侧淡菜打开或打开中为0至-1之间</li>
</ul>
<h4 id="isOpen()">isOpen()</h4><ul>
<li>返回：<code>boolean</code>。左侧或右侧菜单处于打开状态</li>
</ul>
<h4 id="isOpenLeft()">isOpenLeft()</h4><ul>
<li>返回：<code>boolean</code>。左侧菜单处于打开状态</li>
</ul>
<h4 id="isOpenRight()">isOpenRight()</h4><ul>
<li>返回：<code>boolean</code>。右侧菜单处于打开状态</li>
</ul>
<h4 id="canDragContent([canDrag])">canDragContent([canDrag])</h4><table>
<thead>
<tr>
<th style="text-align:center">参数名</th>
<th style="text-align:center">类型</th>
<th style="text-align:center">详细信息</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">canDrag(可选)</td>
<td style="text-align:center">boolean</td>
<td style="text-align:center">设置是否可以通过拖拽打开侧滑菜单</td>
</tr>
</tbody>
</table>
<ul>
<li>返回：<code>boolean</code>。是否可以通过拖拽打开侧滑菜单</li>
</ul>
<h4 id="edgeDragThreshold(value)">edgeDragThreshold(value)</h4><table>
<thead>
<tr>
<th style="text-align:center">参数名</th>
<th style="text-align:center">类型</th>
<th style="text-align:center">详细信息</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">value</td>
<td style="text-align:center">boolean,number</td>
</tr>
</tbody>
</table>
<ul>
<li>返回：<code>boolean</code>。是否可以在屏幕边距阈值内使用拖拽</li>
</ul>
<h4 id="$getByHandle(handle)">$getByHandle(handle)</h4><table>
<thead>
<tr>
<th style="text-align:center">参数名</th>
<th style="text-align:center">类型</th>
<th style="text-align:center">详细信息</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">handle</td>
<td style="text-align:center">string</td>
</tr>
</tbody>
</table>
<ul>
<li>返回:<code>delegateInstance</code>Returns:  A delegate instance that controls only the ionTabs directives with delegate-handle matching the given handle.</li>
</ul>
<p>示例: $ionicSideMenuDelegate.$getByHandle(‘my-handle’).toggleLeft();</p>
      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ionic/">ionic</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/side-menus/">side menus</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/ionic/">ionic</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2014/08/10/Ionic/Side Menus/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-Ionic/Tabs" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/08/10/Ionic/Tabs/" class="article-date">
  	<time datetime="2014-08-09T20:59:23.000Z" itemprop="datePublished">8月 10 2014</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/10/Ionic/Tabs/">ionic-Tabs</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ion-tabs">ion-tabs</h2><p>Delegate：<code>$ionicTabsDelegate</code></p>
<p>提供多tab切换的接口。</p>
<p>可以任意设置<code>tabs class</code>和<code>animation class</code>来定义效果。</p>
<p>单个的tab细节详见<code>ionTab</code>指示器</p>
<p>注意: 不要再ion-content添加ion-tabs，这样会造成css错误</p>
<h3 id="用法">用法</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">ion-tabs</span> <span class="attribute">class</span>=<span class="value">"tabs-positive tabs-icon-only"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="title">ion-tab</span> <span class="attribute">title</span>=<span class="value">"Home"</span> <span class="attribute">icon-on</span>=<span class="value">"ion-ios7-filing"</span> <span class="attribute">icon-off</span>=<span class="value">"ion-ios7-filing-outline"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Tab 1 content --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">ion-tab</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="title">ion-tab</span> <span class="attribute">title</span>=<span class="value">"About"</span> <span class="attribute">icon-on</span>=<span class="value">"ion-ios7-clock"</span> <span class="attribute">icon-off</span>=<span class="value">"ion-ios7-clock-outline"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Tab 2 content --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">ion-tab</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="title">ion-tab</span> <span class="attribute">title</span>=<span class="value">"Settings"</span> <span class="attribute">icon-on</span>=<span class="value">"ion-ios7-gear"</span> <span class="attribute">icon-off</span>=<span class="value">"ion-ios7-gear-outline"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Tab 3 content --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">ion-tab</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">ion-tabs</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ion-tab">ion-tab</h2><p>Child of ionTabs</p>
<p>包含了tab的content。content只有当指定的tab被选中时才出现。</p>
<p>每个ionTab都有自己的view history</p>
<h3 id="用法-1">用法</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">ion-tab</span></span><br><span class="line">  <span class="attribute">title</span>=<span class="value">"Tab!"</span></span><br><span class="line">  <span class="attribute">icon</span>=<span class="value">"my-icon"</span></span><br><span class="line">  <span class="attribute">href</span>=<span class="value">"#/tab/tab-link"</span></span><br><span class="line">  <span class="attribute">on-select</span>=<span class="value">"onTabSelected()"</span></span><br><span class="line">  <span class="attribute">on-deselect</span>=<span class="value">"onTabDeselected()"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ion-tab</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>更加完整的例子请看<code>inoTabs</code></p>
<h3 id="API">API</h3><table>
<thead>
<tr>
<th style="text-align:center">属性</th>
<th style="text-align:center">类型</th>
<th style="text-align:center">详细说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">title</td>
<td style="text-align:center">string</td>
<td style="text-align:center">tab的标题    </td>
</tr>
<tr>
<td style="text-align:center">href(可选)</td>
<td style="text-align:center">string</td>
<td style="text-align:center">The link that this tab will navigate to when tapped</td>
</tr>
<tr>
<td style="text-align:center">icon(可选)</td>
<td style="text-align:center">string</td>
<td style="text-align:center">tab的图标，如果设置，则会变为icon-on和icon-off的默认图标</td>
</tr>
<tr>
<td style="text-align:center">icon-on(可选)</td>
<td style="text-align:center">string</td>
<td style="text-align:center">选中时tab的图标</td>
</tr>
<tr>
<td style="text-align:center">icon-off(可选)</td>
<td style="text-align:center">string</td>
<td style="text-align:center">未选中时tab的图标</td>
</tr>
<tr>
<td style="text-align:center">badge(可选)</td>
<td style="text-align:center">expression</td>
<td style="text-align:center">tab上的徽章，通常为数字</td>
</tr>
<tr>
<td style="text-align:center">badge-style(可选)</td>
<td style="text-align:center">expression</td>
<td style="text-align:center">tab上徽章的样式，tabs-positive等</td>
</tr>
<tr>
<td style="text-align:center">on-select(可选)</td>
<td style="text-align:center">expression</td>
<td style="text-align:center">tab选中的回调函数</td>
</tr>
<tr>
<td style="text-align:center">on-deselect(可选)</td>
<td style="text-align:center">expression</td>
<td style="text-align:center">tab取消选中时的回调</td>
</tr>
<tr>
<td style="text-align:center">ng-click(可选)</td>
<td style="text-align:center">expression</td>
<td style="text-align:center">默认的，tab将会在click之后被选中。如果设置了ngClick，将不会被选中。你可以显示的通过<code>$ionicTabsDelegate.select()</code>切换</td>
</tr>
</tbody>
</table>
<h2 id="$ionicTabsDelegate">$ionicTabsDelegate</h2><p>Delegate for controlling the <code>ionTabs</code> directive.</p>
<p><code>$ionicTabsDelegate</code>服务中的函数控制所有的<code>ionTabs</code>指示器，通过<code>$getByHandle</code>获取具体的<code>ionTabs</code>实例。</p>
<h3 id="用法-2">用法</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">body</span> <span class="attribute">ng-controller</span>=<span class="value">"MyCtrl"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">ion-tabs</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">ion-tab</span> <span class="attribute">title</span>=<span class="value">"Tab 1"</span>&gt;</span></span><br><span class="line">      Hello tab 1!</span><br><span class="line">      <span class="tag">&lt;<span class="title">button</span> <span class="attribute">ng-click</span>=<span class="value">"selectTabWithIndex(1)"</span>&gt;</span>Select tab 2!<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">ion-tab</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">ion-tab</span> <span class="attribute">title</span>=<span class="value">"Tab 2"</span>&gt;</span>Hello tab 2!<span class="tag">&lt;/<span class="title">ion-tab</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="title">ion-tabs</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyCtrl</span><span class="params">($scope, $ionicTabsDelegate)</span> </span>&#123;</span><br><span class="line">  $scope.selectTabWithIndex = <span class="function"><span class="keyword">function</span><span class="params">(index)</span> </span>&#123;</span><br><span class="line">    $ionicTabsDelegate.select(index);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="方法">方法</h3><h4 id="select(index,_[shouldChangeHistory])"><code>select(index, [shouldChangeHistory])</code></h4><p>通过给定的index选中tab</p>
<table>
<thead>
<tr>
<th style="text-align:center">参数名</th>
<th style="text-align:center">类型</th>
<th style="text-align:center">详细信息</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">index</td>
<td style="text-align:center">number</td>
<td style="text-align:center">选中tab的缩影</td>
</tr>
<tr>
<td style="text-align:center">shouldChangeHistory(可选)</td>
<td style="text-align:center">boolean</td>
<td style="text-align:center">是否此次选中载入指定tab的历史，或者仅仅载入默认的页面。默认为false。提示：如果tab中有ionNavView，这个很可能为true</td>
</tr>
</tbody>
</table>
<h4 id="selectedIndex"><code>selectedIndex</code></h4><ul>
<li>返回：<code>number</code>,选中tab的索引，没有则为-1</li>
</ul>
<h4 id="$getByHandle(handle)"><code>$getByHandle(handle)</code></h4><table>
<thead>
<tr>
<th style="text-align:center">参数名</th>
<th style="text-align:center">类型</th>
<th style="text-align:center">详细信息</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">handle</td>
<td style="text-align:center">string</td>
</tr>
</tbody>
</table>
<ul>
<li>返回:<code>delegateInstance</code>Returns:  A delegate instance that controls only the ionTabs directives with delegate-handle matching the given handle.</li>
</ul>
<p>示例: $ionicTabsDelegate.$getByHandle(‘my-handle’).select(0);</p>
      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tabs/">Tabs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ionic/">ionic</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/ionic/">ionic</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2014/08/10/Ionic/Tabs/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-Ionic/Cordova" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/08/09/Ionic/Cordova/" class="article-date">
  	<time datetime="2014-08-08T22:53:03.000Z" itemprop="datePublished">8月 9 2014</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/09/Ionic/Cordova/">Can&#39;t install Cordova plugins from Git on CLI</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>错误信息<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\UserName\Desktop\hello&#62;cordova plugin add https://github.com/danwilson/google-analytics-plugin.git&#10;Fetching plugin &#34;https://github.com/danwilson/google-analytics-plugin.git&#34; via git clone&#10;Error: Command failed: fatal: could not create work tree dir &#39;C:\Users\DAVIDH~1\AppData\Local\Temp\plugman\git\1397683376354&#39;.: No such file or directory</span><br></pre></td></tr></table></figure></p>
<p>解决办法</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir C:\Users\DAVIDH~1\AppData\Local\Temp\plugman\git</span><br></pre></td></tr></table></figure>
<p>参考：<a href="http://stackoverflow.com/questions/23121382/cant-install-cordova-plugins-from-git-on-cli" target="_blank" rel="external">Can’t install Cordova plugins from Git on CLI</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cordova/">cordova</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/cordova/">cordova</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-Linux/linux笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/08/06/Linux/linux笔记/" class="article-date">
  	<time datetime="2014-08-06T09:51:13.000Z" itemprop="datePublished">8月 6 2014</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/06/Linux/linux笔记/">linux笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="重启命令">重启命令</h2><ol>
<li>reboot</li>
<li>shutdown -r now 立刻重启(root用户使用)</li>
<li>shutdown -r 10 过10分钟自动重启(root用户使用) </li>
<li>shutdown -r 20:35 在时间为20:35时候重启(root用户使用)</li>
</ol>
<p>如果是通过shutdown命令设置重启的话，可以用shutdown -c命令取消重启</p>
<h2 id="关机命令">关机命令</h2><ol>
<li>halt   立刻关机</li>
<li>poweroff  立刻关机</li>
<li>shutdown -h now 立刻关机(root用户使用)</li>
<li>shutdown -h 10 10分钟后自动关机</li>
</ol>
<p>如果是通过shutdown命令设置关机的话，可以用shutdown -c命令取消重启</p>
<h2 id="创建用户（useradd）：">创建用户（useradd）：</h2><p>在Linux下创建用户和删除用户，必须在root用户下，如果你当前不是用根用户登录，你可以打开终端，输入”su root”命令，再输入根口令，就可以进入root用户模式</p>
<ol>
<li>用useradd命令创建用户创建用户：<br>语法： useradd [所要创建的用户名] ，回车</li>
<li>用passwd命令为该用户创建密码：<br>语法： passwd [用户名]  ，回车</li>
<li>输入密码：一般密码至少要有六个字符，这里输入的密码是看不见的，所以看到屏幕没显示，不要以为是输入失败</li>
<li>重新输一次密码：<br>这里我创建一个名为aillo的用户，如下所示：</li>
</ol>
<h2 id="删除用户（userdel）">删除用户（userdel）</h2><p>语法：userdel [-r] [要删除的用户的名称]<br>例如：[root@localhost ~]userdel -r aillo</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/linux/">linux</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-Nginx/nginx守护进程" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/08/05/Nginx/nginx守护进程/" class="article-date">
  	<time datetime="2014-08-05T15:37:54.000Z" itemprop="datePublished">8月 5 2014</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/05/Nginx/nginx守护进程/">nginx守护进程</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置nginx开启启动，编辑启动文件添加下面内容</span></span><br><span class="line"><span class="comment">#################################################################</span></span><br><span class="line"><span class="shebang">#!/bin/bash</span></span><br><span class="line"><span class="comment"># nginx Startup script for the Nginx HTTP Server</span></span><br><span class="line"><span class="comment"># it is v.0.0.2 version.</span></span><br><span class="line"><span class="comment"># chkconfig: - 85 15</span></span><br><span class="line"><span class="comment"># description: Nginx is a high-performance web and proxy server.</span></span><br><span class="line"><span class="comment"># It has a lot of features, but it's not for everyone.</span></span><br><span class="line"><span class="comment"># processname: nginx</span></span><br><span class="line"><span class="comment"># pidfile: /var/run/nginx.pid</span></span><br><span class="line"><span class="comment"># config: /usr/local/nginx/conf/nginx.conf</span></span><br><span class="line">nginxd=/usr/<span class="built_in">local</span>/nginx/sbin/nginx</span><br><span class="line">nginx_config=/usr/<span class="built_in">local</span>/nginx/conf/nginx.conf</span><br><span class="line">nginx_pid=/usr/<span class="built_in">local</span>/nginx/logs/nginx.pid</span><br><span class="line">RETVAL=<span class="number">0</span></span><br><span class="line">prog=<span class="string">"nginx"</span></span><br><span class="line"><span class="comment"># Source function library.</span></span><br><span class="line">./etc/rc.d/init.d/<span class="built_in">functions</span></span><br><span class="line"><span class="comment"># Source networking configuration.</span></span><br><span class="line">./etc/sysconfig/network</span><br><span class="line"><span class="comment"># Check that networking is up.</span></span><br><span class="line">[ <span class="variable">$&#123;NETWORKING&#125;</span> = <span class="string">"no"</span> ] &amp;&amp; <span class="built_in">exit</span> <span class="number">0</span></span><br><span class="line">[ -x <span class="variable">$nginxd</span> ] || <span class="built_in">exit</span> <span class="number">0</span></span><br><span class="line"><span class="comment"># Start nginx daemons functions.</span></span><br><span class="line"><span class="function"><span class="title">start</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [ <span class="operator">-e</span> <span class="variable">$nginx_pid</span> ];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"nginx already running...."</span></span><br><span class="line">        <span class="built_in">exit</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">echo</span> -n $<span class="string">"Starting <span class="variable">$prog</span>: "</span></span><br><span class="line">    daemon <span class="variable">$nginxd</span> -c <span class="variable">$&#123;nginx_config&#125;</span></span><br><span class="line">    RETVAL=$?</span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line">    [ <span class="variable">$RETVAL</span> = <span class="number">0</span> ] &amp;&amp; touch /var/lock/subsys/nginx</span><br><span class="line">    <span class="built_in">return</span> <span class="variable">$RETVAL</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># Stop nginx daemons functions.</span></span><br><span class="line"><span class="function"><span class="title">stop</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> -n $<span class="string">"Stopping <span class="variable">$prog</span>: "</span></span><br><span class="line">    killproc <span class="variable">$nginxd</span></span><br><span class="line">    RETVAL=$?</span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line">    [ <span class="variable">$RETVAL</span> = <span class="number">0</span> ] &amp;&amp; rm <span class="operator">-f</span> /var/lock/subsys/nginx /usr/<span class="built_in">local</span>/nginx/logs/nginx.pid</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">reload</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> -n $<span class="string">"Reloading <span class="variable">$prog</span>: "</span></span><br><span class="line">    <span class="comment">#kill -HUP `cat $&#123;nginx_pid&#125;`</span></span><br><span class="line">    killproc <span class="variable">$nginxd</span> -HUP</span><br><span class="line">    RETVAL=$?</span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># See how we were called.</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></span><br><span class="line">    start)</span><br><span class="line">    start</span><br><span class="line">    ;;</span><br><span class="line">    stop)</span><br><span class="line">    stop</span><br><span class="line">    ;;</span><br><span class="line">    reload)</span><br><span class="line">    reload</span><br><span class="line">    ;;</span><br><span class="line">    restart)</span><br><span class="line">    stop</span><br><span class="line">    start</span><br><span class="line">    ;;</span><br><span class="line">    status)</span><br><span class="line">    status <span class="variable">$prog</span></span><br><span class="line">    RETVAL=$?</span><br><span class="line">    ;;</span><br><span class="line">    *)</span><br><span class="line">    <span class="built_in">echo</span> $<span class="string">"Usage: <span class="variable">$prog</span> &#123;start|stop|restart|reload|status|help&#125;"</span></span><br><span class="line">    <span class="built_in">exit</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"><span class="built_in">exit</span> <span class="variable">$RETVAL</span></span><br><span class="line"></span><br><span class="line">:wq!           <span class="comment">#保存退出</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chmod <span class="number">775</span>  /etc/rc.d/init.d/nginx       <span class="comment">#赋予文件执行权限</span></span><br><span class="line">chkconfig nginx on            <span class="comment">#设置开机启动</span></span><br><span class="line">/etc/rc.d/init.d/nginx restart             <span class="comment">#重启</span></span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/">nginx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/守护进程/">守护进程</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/nginx/">nginx</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-Nginx/nginx-conf" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/08/05/Nginx/nginx-conf/" class="article-date">
  	<time datetime="2014-08-05T15:34:30.000Z" itemprop="datePublished">8月 5 2014</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/05/Nginx/nginx-conf/">nginx的配置文件</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#user  nobody;&#10;worker_processes  4;&#10;&#10;#error_log  logs/error.log;&#10;#error_log  logs/error.log  notice;&#10;#error_log  logs/error.log  info;&#10;&#10;#pid        logs/nginx.pid;&#10;worker_rlimit_nofile  65535;   #nginx&#33021;&#25171;&#24320;&#25991;&#20214;&#30340;&#26368;&#22823;&#21477;&#26564;&#25968;,&#26368;&#22909;&#19982;ulimit -n&#30340;&#20540;&#20445;&#25345;&#19968;&#33268;,&#20351;&#29992;ulimit -SHn 65535 &#35774;&#32622;&#10;&#10;events &#123;&#10;    worker_connections  1024;&#10;&#125;&#10;&#10;&#10;http &#123;&#10;    include       mime.types;&#10;    include       vhost/*.conf;&#10;    default_type  application/octet-stream;&#10;    sendfile on; &#10;    #log_format  main  &#39;$remote_addr - $remote_user [$time_local] &#34;$request&#34; &#39;&#10;    #                  &#39;$status $body_bytes_sent &#34;$http_referer&#34; &#39;&#10;    #                  &#39;&#34;$http_user_agent&#34; &#34;$http_x_forwarded_for&#34;&#39;;&#10;&#10;    #access_log  logs/access.log  main;&#10;&#10;&#10;    #tcp_nopush     on;&#10;&#10;    #keepalive_timeout  0;&#10;    keepalive_timeout  65;&#10;&#10;    gzip on; #&#21551;&#29992;gzip&#21151;&#33021;  &#10;    gzip_static on; #&#26816;&#26597;&#26377;&#27809;&#26377;&#38745;&#24577;&#25991;&#20214;&#30340;.gz&#29256;&#26412;&#65292;&#27809;&#26377;&#33258;&#34892;gzip  &#10;    gzip_disable &#34;MSIE [1-6]\.(?!.*SV1)&#34;; #IE6&#20197;&#19979;&#31105;&#29992;gzip  &#10;    gzip_comp_level 7; #&#32423;&#21035;&#36234;&#39640;&#65292;CPU&#21344;&#29992;&#36234;&#22810;&#65292;&#21387;&#32553;&#30340;&#36234;&#23567;  &#10;    gzip_min_length 1024; #&#21040;&#36798;1K&#30340;&#25991;&#20214;&#25165;gzip&#10;&#10;    #&#35299;&#20915;414 Request URL Too Large&#10;    client_header_buffer_size 512k;&#10;    large_client_header_buffers 4 512k;&#10;&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/">nginx</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/nginx/">nginx</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-Nodejs/在nodejs里定义全局变量" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/08/05/Nodejs/在nodejs里定义全局变量/" class="article-date">
  	<time datetime="2014-08-04T21:44:12.000Z" itemprop="datePublished">8月 5 2014</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/05/Nodejs/在nodejs里定义全局变量/">在nodejs里定义全局变量</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>如果你正在使用一系列node模块，或许是一个像Express.js一样的框架，突然需要使用几个全局变量。怎样在nodejs里创建全局变量呢？<br>对此最常见的建议是“不使用‘var’关键字声明一个变量”或“给object对象添加一个变量”或“给OBJECT对象添加一个变量”。你会使用哪种方式呢？<br>首先，让我们分析下global对象。打开一个终端，启动一个node命令提示界面：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ node&#10;&#62;</span><br></pre></td></tr></table></figure></p>
<p>在命令提示界面下看看关于global的所有信息：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#62; global</span><br></pre></td></tr></table></figure></p>
<p>飞天怪物的神圣母亲!!!那是一个超级大的对象！事实上，你看到了node的核心。所有在node进程里的对象都挂在这个对象上。如果你非常熟悉javascript所在的浏览器环境，global对象是等同于window对象。<br>现在我们已经指导global对象是声明，让我们把玩下它：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#62; global.name&#10;undefined&#10;&#62; global.name = &#39;El Capitan&#39;&#10;&#62; global.name&#10;&#39;El Capitan&#39;&#10;&#62; GLOBAL.name&#10;&#39;El Capitan&#39;&#10;&#62; delete global.name&#10;true&#10;&#62; GLOBAL.name&#10;undefined&#10;&#62; name = &#39;El Capitan&#39;&#10;&#39;El Capitan&#39;&#10;&#62; global.name&#10;&#39;El Capitan&#39;&#10;&#62; GLOBAL.name&#10;&#39;El Capitan&#39;&#10;&#62; var name = &#39;Sparrow&#39;&#10;undefined&#10;&#62; global.name&#10;&#39;Sparrow&#39;</span><br></pre></td></tr></table></figure></p>
<p>令人兴奋的观察！</p>
<p>global和BLOBAL看起来是一个同一个东西且是一回事。确实，Global是global一个别名。</p>
<p>令我们超感兴趣的是一个使用还是不使用var关键字声明的变量附加到global对象上。在node里创建一个全局变量的最基本的方式就是通过不使用var关键字声明一个变量。这种做法与使用一个模块(module)略有不同，接下来我讲解释它。</p>
<p>当你启动一个node进程，将会启动一个模块，那么所有的模块将会被包含在它里面，所有模块都共享同一个global对象。应用上面的测试观察结合实际，你就会明白全局变量怎样在node里工作。然而有些轻微的变化，如果使用var关键字声明的变量将会保留在本地模块里；这些声明的变量没有附加到global对象里。</p>
<p>那么现在你已经知道”没有使用var关键字声明的变量“，”向global里添加一个变量“，”给GLOBAL对象添加一个变量“，所有这些都是一回事。</p>
<p>在一个module里全局声明的变量能够被其他任何模块使用它们的名字来引用，没必要从global对象引用它们。但是这不意味这你就可以这样做。为什么呢？请看这样:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> company = <span class="string">'Yahoo'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(global.company); <span class="comment">// 'Google'</span></span><br><span class="line"><span class="built_in">console</span>.log(company); <span class="comment">// 'Yahoo'</span></span><br></pre></td></tr></table></figure></p>
<p>当你使用global.company时,你知道你使用的是全局变量，但是它的备用名字company在module是当作局部变量来使用的。</p>
<p>如果你打算在你的node应用里使用全局变量，那么我们讨论的创建变量方法会工作的很好。然而，请不要过度使用它。话虽如此，还有可以不使用全局对象的替代解决方案吗？</p>
<p>是的，有这么一个，它涉及到module.exports的使用。让我使用例子来演示：</p>
<p>File: main.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exports.company = <span class="string">'Google'</span>;</span><br><span class="line"><span class="keyword">var</span> m = <span class="built_in">require</span>(<span class="string">'./mod'</span>);</span><br></pre></td></tr></table></figure></p>
<p>File: mod.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> company = <span class="built_in">require</span>(<span class="string">'./main'</span>).company;</span><br><span class="line"><span class="built_in">console</span>.log(company);</span><br></pre></td></tr></table></figure></p>
<p>现在看看执行结果：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ node main.js&#10;Google</span><br></pre></td></tr></table></figure></p>
<p>这样你就实现了，一个其他模块的的变量你可以在另外的模块中使用他而没有使用global对象。你可以include main.js在其他的module来访问company名字。</p>
<p>注意：引用（include）一个已经被其他模块引用过的模块时，仅仅创建一个指向之前包体的引用，因此这意味着不会极度消耗内存。也因为没有重新创建一个真正的包体，在module里的所有初始化方法没有再执行。</p>
<p>因此，一个包体中，有2钟创建node全局变量的方法，一个是使用global对象，另一个是使用modules.exports。哪个是我推荐的呢?global方法适用小的应用，modules.exprots适用于大的应用。</p>
<p>原文：<a href="http://www.hacksparrow.com/global-variables-in-node-js.html" target="_blank" rel="external">http://www.hacksparrow.com/global-variables-in-node-js.html</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node/">node</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/全部变量/">全部变量</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/node/">node</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-Nginx/Upstream负载均衡模块" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/07/24/Nginx/Upstream负载均衡模块/" class="article-date">
  	<time datetime="2014-07-23T22:00:38.000Z" itemprop="datePublished">7月 24 2014</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/24/Nginx/Upstream负载均衡模块/">Upstream负载均衡模块</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Nginx 的 HttpUpstreamModule 提供对后端（backend）服务器的简单负载均衡。一个最简单的 upstream 写法如下：<br><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">upstream backend &#123;</span><br><span class="line">    <span class="keyword">server</span> backend1.example.com;</span><br><span class="line">    <span class="keyword">server</span> backend2.example.com;</span><br><span class="line">    <span class="keyword">server</span>.backend3.example.com;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">server</span> &#123;</span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http:<span class="comment">//backend;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="1-后端服务器">1.后端服务器</h2><p>通过 upstream 可以设定后端服务器，指定的方式可以是 IP 地址与端口、域名、UNIX 套接字（socket）。其中如果域名可以被解析为多个地址，则这些地址都作为 backend。下面举例说明：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">upstream</span> backend &#123;</span><br><span class="line">    <span class="title">server</span> blog.csdn.net/poechant;</span><br><span class="line">    <span class="title">server</span> <span class="number">145.223.156.89:8090</span>;</span><br><span class="line">    <span class="title">server</span> <span class="url">unix:/tmp/backend3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第一个 backend 是用域名指定的。第二个 backend 是用 IP 和端口号指定的。第三个 backend 是用 UNIX 套接字指定的。</p>
<h2 id="2-负载均衡策略">2.负载均衡策略</h2><p>Nginx 提供轮询（round robin）、用户 IP 哈希（client IP）和指定权重 3 种方式。<br>默认情况下，Nginx 会为你提供轮询作为负载均衡策略。但是这并不一定能够让你满意。比如，某一时段内的一连串访问都是由同一个用户 Michael 发起的，那么第一次 Michael 的请求可能是 backend2，而下一次是 backend3，然后是 backend1、backend2、backend3…… 在大多数应用场景中，这样并不高效。当然，也正因如此，Nginx 为你提供了一个按照 Michael、Jason、David 等等这些乱七八糟的用户的 IP 来 hash 的方式，这样每个 client 的访问请求都会被甩给同一个后端服务器。（另外，由于最近发现很多网站以不留原文链接的方式盗取本博博文，所以我就在这插一下本博的地址“<a href="http://blog.csdn.net/poechant”）具体的使用方式如下：" target="_blank" rel="external">http://blog.csdn.net/poechant”）具体的使用方式如下：</a></p>
<figure class="highlight roboconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="component">upstream backend &#123;</span><br><span class="line">    ip_hash;</span><br><span class="line">    server backend1<span class="string">.example.com</span>;</span><br><span class="line">    server backend2<span class="string">.example.com</span>;</span><br><span class="line">    server<span class="string">.backend3.example.com</span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>这种策略中，用于进行 hash 运算的 key，是 client 的 C 类 IP 地址（C 类 IP 地址就是范围在 192.0.0.0 到 223.255.255.255 之间，前三段号码表示子网，第四段号码为本地主机的 IP 地址类别）。这样的方式保证一个 client 每次请求都将到达同一个 backend。当然，如果所 hash 到的 backend 当前不可用，则请求会被转移到其他 backend。</p>
<p>再介绍一个和 ip_hash 配合使用的关键字：down。当某个一个 server 暂时性的宕机（down）时，你可以使用“down”来标示出来，并且这样被标示的 server 就不会接受请求去处理。具体如下：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">upstream</span> backend &#123;</span><br><span class="line">    <span class="title">server</span> blog.csdn.net/poechant down;</span><br><span class="line">    <span class="title">server</span> <span class="number">145.223.156.89:8090</span>;</span><br><span class="line">    <span class="title">server</span> <span class="url">unix:/tmp/backend3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>还可以使用指定权重（weight）的方式，如下：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">upstream</span> backend &#123;</span><br><span class="line">    <span class="title">server</span> backend1.example.com;</span><br><span class="line">    <span class="title">server</span> <span class="number">123.321.123.321:456</span> weight=<span class="number">4</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>默认情况下 weight 为 1，对于上面的例子，第一个 server 的权重取默认值 1，第二个是 4，所以相当于第一个 server 接收 20% 的请求，第二接收 80% 的。要注意的是 weight 与 ip_hash 是不能同时使用的，原因很简单，他们是不同且彼此冲突的策略。</p>
<h2 id="3-重试策略">3.重试策略</h2><p>可以为每个 backend 指定最大的重试次数，和重试时间间隔。所使用的关键字是 max_fails 和 fail_timeout。如下所示：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">upstream</span> backend &#123;</span><br><span class="line">    <span class="title">server</span> backend1.example.com weight=<span class="number">5</span>;</span><br><span class="line">    <span class="title">server</span> <span class="number">54.244.56.3:8081</span> max_fails=<span class="number">3</span> fail_timeout=<span class="number">30s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在上例中，最大失败次数为 3，也就是最多进行 3 次尝试，且超时时间为 30秒。max_fails 的默认值为 1，fail_timeout 的默认值是 10s。传输失败的情形，由 proxy_next_upstream 或 fastcgi_next_upstream 指定。而且可以使用 proxy_connect_timeout 和 proxy_read_timeout 控制 upstream 响应时间。</p>
<p>有一种情况需要注意，就是 upstream 中只有一个 server 时，max_fails 和 fail_timeout 参数可能不会起作用。导致的问题就是 nginx 只会尝试一次 upstream 请求，如果失败这个请求就被抛弃了 : ( ……解决的方法，比较取巧，就是在 upstream 中将你这个可怜的唯一 server 多写几次，如下：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">upstream</span> backend &#123;</span><br><span class="line">    <span class="title">server</span> backend.example.com max_fails fail_timeout=<span class="number">30s</span>;</span><br><span class="line">    <span class="title">server</span> backend.example.com max_fails fail_timeout=<span class="number">30s</span>;</span><br><span class="line">    <span class="title">server</span> backend.example.com max_fails fail_timeout=<span class="number">30s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-备机策略">4.备机策略</h2><p>从 Nginx 的 0.6.7 版本开始，可以使用“backup”关键字。当所有的非备机（non-backup）都宕机（down）或者繁忙（busy）的时候，就只使用由 backup 标注的备机。必须要注意的是，backup 不能和 ip_hash 关键字一起使用。举例如下：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">upstream</span> backend &#123;</span><br><span class="line">    <span class="title">server</span> backend1.example.com;</span><br><span class="line">    <span class="title">server</span> backend2.example.com backup;</span><br><span class="line">    <span class="title">server</span> backend3.example.com;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>转载请注明来自“柳大的CSDN博客”：<a href="http://blog.csdn.net/poechant" target="_blank" rel="external">http://blog.csdn.net/poechant</a><br>更多文章请浏览CSDN专栏《Nginx高性能Web服务器》或 服务器后端开发系列——《实战Nginx高性能Web服务器》</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/">nginx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/负载均衡/">负载均衡</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/nginx/">nginx</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-Nginx/414Request-URITooLarge" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/07/24/Nginx/414Request-URITooLarge/" class="article-date">
  	<time datetime="2014-07-23T21:59:54.000Z" itemprop="datePublished">7月 24 2014</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/24/Nginx/414Request-URITooLarge/">Large Request-URI-Too-Large</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>客户端请求头缓冲区大小，如果请求头总长度大于小于128k，则使用此缓冲区，<br>请求头总长度大于128k时使用large_client_header_buffers设置的缓存区<br><code>client_header_buffer_size 128k;</code></p>
<p>large_client_header_buffers 指令参数4为个数，128k为大小，默认是8k。申请4个128k。<br><code>large_client_header_buffers 4 128k;</code></p>
<p>当http 的URI太长或者request header过大时会报414 Request URI too large或400 bad request错误。</p>
<p>可能原因:</p>
<ol>
<li>cookie中写入的值太大造成的，因为header中的其他参数的size一般比较固定，只有cookie可能被写入较大的数据</li>
<li>请求参数太长，比如发布一个文章正文，用urlencode后，使用get方式传到后台。</li>
</ol>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="request">GET <span class="string">http://www.264.cn/</span> HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span>: <span class="string">www.264.cn</span></span><br><span class="line"><span class="attribute">Connection</span>: <span class="string">keep-alive</span></span><br><span class="line"><span class="attribute">Cache-Control</span>: <span class="string">max-age=0</span></span><br><span class="line"><span class="attribute">Accept</span>: <span class="string">text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</span></span><br><span class="line"><span class="attribute">User-Agent</span>: <span class="string">Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.31 </span></span><br><span class="line"><span class="attribute">Accept-Encoding</span>: <span class="string">gzip,deflate,sdch</span></span><br><span class="line"><span class="attribute">Accept-Language</span>: <span class="string">zh-CN,zh;q=0.8</span></span><br><span class="line"><span class="attribute">Accept-Charset</span>: <span class="string">GBK,utf-8;q=0.7,*;q=0.3</span></span><br><span class="line"><span class="attribute">Cookie</span>: <span class="string">bdshare_firstime=1363517175366; </span></span><br><span class="line"><span class="attribute">If-Modified-Since</span>: <span class="string">Mon, 13 May 2013 13:40:02 GMT</span></span><br></pre></td></tr></table></figure>
<p>当请求头过大时，超过large_client_header_buffer时，nginx可能返回”Request URI too large” (414)或者”Bad-request”(400)错误,</p>
<p>如上例HTTP请求头由多行构成，其中”GET <a href="http://www.264.cn/" target="_blank" rel="external">http://www.264.cn/</a> HTTP/1.1”表示Request line</p>
<p>当Request line的长度大于large_client_header_buffer的一个buffer(128k)时，nginx会返回”Request URI too large” (414)错误，对应上面的场景2。</p>
<p>请求投中最长的一行也要小于large_client_header_buffer，当不是Request line的最长行大于一个buffer(128k)时，会返回”Bad-request”(400)错误，对应上面的场景1。</p>
<p>解决办法：这时可以调大上述两个值。</p>
<p>在http节点处添加</p>
<p>client_header_buffer_size 512k;<br>large_client_header_buffers 4 512k;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/">nginx</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/nginx/">nginx</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-Nodejs/[翻译]statejs" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/07/24/Nodejs/[翻译]statejs/" class="article-date">
  	<time datetime="2014-07-23T21:59:31.000Z" itemprop="datePublished">7月 24 2014</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/24/Nodejs/[翻译]statejs/">[翻译]statejs</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="States">States</h1><p> <code>State</code> 的实例封装了<code>owner</code>在指定时刻下的条件和行为。 一个<code>State</code>是由methods, arbitrary data, events, guards, substates和 transition expressions的集合组成。<br>一个owner通常拥有多个<code>State</code>s, 并且指向其中一个作为 current state, 在current state中owner会表现出相应的方法和行为。通过行为来触发 transition使得由一个状态转变为另外一个状态。</p>
<h1 id="Object_model">Object model</h1><p><code>State</code> objects are modeled by a set of relational references that define three distinct dimensions or “axes”.状态对象是由一组定义三个不同的维度或“轴”关系的参考蓝本。<br>从根本上来说，<code>State</code> 模型是分层次的，从 owner 拥有着唯一的root state开始，每个<code>state</code>都作为 superstate被 substates 继承。一个 <code>State</code> 可能从零个或者多个 parastates继承，提供了定义成分的关系，通过C3线性多重继承实现的一种手段。<br>如果owner的<code>state</code>树是由其他owner的prototypal继承而来 ，继承的owner将可以view their prototype’s States as protostates from which their own epistates inherit.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = &#123;&#125;;</span><br><span class="line">state(p, &#123;</span><br><span class="line">    A: state,</span><br><span class="line">    B: state(&#123;</span><br><span class="line">        BA: state,</span><br><span class="line">        BB: state</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o = <span class="built_in">Object</span>.create(p);</span><br><span class="line">state(o, &#123;</span><br><span class="line">    A: state(&#123;</span><br><span class="line">        AA: state.extend(<span class="string">'X, Y'</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">    X: state,</span><br><span class="line">    Y: state</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>State S 的继承顺序如下 relation precedence:<br>1.S的protostate继承链<br>2.S的parastates，按照声明的先后顺序<br>3.S的superstate<br>其中parastate和superstate线性加载，或者并行，protostate则按照顺序加载</p>
<h2 id="The_root_state">The root state</h2><p>所有被 <code>State</code> 影响的 owner 都有单独的 root state。root state的名称为唯一的空字符串 ‘’.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">owner.state().root === owner.state(<span class="string">''</span>);   <span class="comment">// &gt;&gt;&gt; true (invariant)</span></span><br><span class="line">owner.state(<span class="string">'-&gt;'</span>);</span><br><span class="line">owner.state();                            <span class="comment">// &gt;&gt;&gt; State ''</span></span><br></pre></td></tr></table></figure></p>
<p>默认的，owner的初始current state被设置为 root state — 除非 root state 被标记为 abstract attribute，或者另外一个 <code>State</code> 被标记为 initial attribute.<br>root state 还可以用来存储 methods 并且可以被owner的 <code>State</code>s重写。这些方法被替换至root state。如果没有被重写，则会调用默认的方法。</p>
<h2 id="Superstates_and_substates">Superstates and substates</h2><p><strong>owner</strong> 表现得行为由 <strong>substates</strong> 决定 ，这些<strong>substates</strong> 由 <strong>superstates</strong> 生成<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line">state( o, &#123;</span><br><span class="line">    A: state(&#123;</span><br><span class="line">        AA: state,</span><br><span class="line">        AB: state</span><br><span class="line">    &#125;),</span><br><span class="line">    B: state</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> root = o.state(<span class="string">''</span>);                    <span class="comment">// &gt;&gt;&gt; RootState</span></span><br><span class="line">o.state() === root;                        <span class="comment">// &gt;&gt;&gt; true</span></span><br><span class="line">o.state(<span class="string">'-&gt; AA'</span>);</span><br><span class="line">o.state() === o.state(<span class="string">'AA'</span>);               <span class="comment">// &gt;&gt;&gt; true</span></span><br><span class="line">o.state().superstate === o.state(<span class="string">'A'</span>);     <span class="comment">// &gt;&gt;&gt; true</span></span><br><span class="line">o.state().superstate.superstate === root;  <span class="comment">// &gt;&gt;&gt; true</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Parastates_and_composition">Parastates and composition</h2><p>除了通过 <strong>superstates</strong> 继承，<code>State</code> 模型还支持通过 <strong>parastate</strong> 关系实现多继承。<br>最孤单的就是RootState，它不承担任何关系。<br>Parastates 通过 <code>state.extend</code> 函数声明, 参数为一个或多个字符串 to parastates, along with optional parameters attributes and expression, and returns a StateExpression that can be used to produce a State with the named parastates.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;&#125;;</span><br><span class="line">state( o, &#123;</span><br><span class="line">    A: state(&#123;</span><br><span class="line">        AA: state.extend(<span class="string">'X, Y'</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">    X: state,</span><br><span class="line">    Y: state</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h1 id="状态表达式(Expressions)">状态表达式(Expressions)</h1><p><code>State</code> 通过 <em>state expression</em> 数据结构以声明的方式定义。<br><code>StateExpression</code> 通过调用不包含<code>owner</code>参数的 <code>state()</code> 函数创建，仅提供一个 <code>expression</code> 参数，还可以提供由空格分隔的 <code>attributes</code>参数。<br>在其内部， 状态表达式的内容根据对象的 categories 设置，其中包含 <code>data</code>, <code>methods</code>, <code>events</code>, <code>guards</code>, <code>substates</code> 和 <code>transitions</code>。<code>state()</code> 的 <code>expression</code>可以根据这些 categories形成结构化，或者可以通过类型推断来简化实现一些更加简单的缩写。</p>
<h2 id="结构化状态表达式(Structured_state_expressions)">结构化状态表达式(Structured state expressions)</h2><p>以入门的例子为基础，我们可以写一个包含明确分类的expression，包含子状态、方法、事件等。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> longformExpression = state(&#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        greet: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="string">"Hello."</span>; &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    states: &#123;</span><br><span class="line">        Formal: &#123;</span><br><span class="line">            methods: &#123;</span><br><span class="line">                greet: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="string">"How do you do?"</span>; &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            events: &#123;</span><br><span class="line">                enter: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123; <span class="keyword">this</span>.wearTux(); &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        Casual: &#123;</span><br><span class="line">            methods: &#123;</span><br><span class="line">                greet: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="string">"Hi!"</span>; &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            events: &#123;</span><br><span class="line">                enter: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123; <span class="keyword">this</span>.wearJeans(); &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// &gt;&gt;&gt; StateExpression</span></span><br></pre></td></tr></table></figure></p>
<h2 id="简写(Shorthand)">简写(Shorthand)</h2><p>明确的分类是很准确的，但是这样显得很冗余。所有 state() 同样接受更加简便的表达形式。效果同上面的一样。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shorthandExpression = state(&#123;</span><br><span class="line">    greet: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="string">"Hello."</span>; &#125;,</span><br><span class="line"></span><br><span class="line">    Formal: &#123;</span><br><span class="line">        enter: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123; <span class="keyword">this</span>.wearTux(); &#125;,</span><br><span class="line">        greet: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="string">"How do you do?"</span>; &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    Casual: &#123;</span><br><span class="line">        enter: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123; <span class="keyword">this</span>.wearJeans(); &#125;,</span><br><span class="line">        greet: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="string">"Hi!"</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// &gt;&gt;&gt; StateExpression</span></span><br></pre></td></tr></table></figure></p>
<p>在这个例子中，<code>state()</code> 根据以下规则解释：<br><em>识别缺乏键名的类别 ，推断 <code>Formal</code> 和 <code>Casual</code> 为状态
</em>将 <code>enter</code> 识别为内置的事件类型，将关联的函数作为 <code>enter</code> 事件的监听器，别且在被所在的 <code>state</code> 触发。<br>*推断 <code>greet</code> 不是一个内置的事件类型，所以被认为是一个方法。<br>所有显示的定义可以通过简写来实现，但是要避免出现含糊不清的情况 (例如，创建一个名为 <code>data</code> 的状态，或者方法名叫做 <code>enter</code>。</p>
<h2 id="表达式推断(Interpreting_expression_input)">表达式推断(Interpreting expression input)</h2><p>提供给 <code>state()</code>的 <code>StateExpression</code>根据以下规则推断解释：<br>1.如果输入的值的类型为<code>StateExpression</code>或<code>TransitionExpression</code>并且推断如此，则使用输入的键名为它的名称，如果输入的值是<code>state</code>函数自身，则推断为名称为键名的空状态。<br>2.如果键名是类名，它的值是一个对象或null，那么它将被解释，因为它会在长期形成的结构化格式。<br>3.如果键名同 built-in event type 匹配，或者值是string， 则推断值作为一个事件监听函数，, an array of event listeners, or a named transition target to be bound to that event type.<br>4.Otherwise, if an entry’s key matches a guard action (i.e., admit, release), interpret the value as a guard condition (or array of guard conditions).<br>5.Otherwise, if an entry’s value is an object, interpret it as a substate whose name is the entry’s key, or if the entry’s value is a function, interpret it as a method whose name is the entry’s key.</p>
<h1 id="Transitions过渡">Transitions过渡</h1><p>Whenever an object’s current state changes, a transition state is created, which temporarily assumes the role of the current state while the object is travelling from its origin or source state to its target state.<br>每当一个对象的当前状态的变化，会创建一个过渡状态，这暂时假定当前状态的角色，而对象从它的源状态变化到目标状态。</p>
<h2 id="Transition_expressions">Transition expressions</h2><p>A state expression may include any number of transition expressions, which define some action to be performed, either synchronously or asynchronously, along with selectors for the origin/source and target states to which the transition should apply, and guards to determine the appropriate transition to employ.<br>状态表达式可以包括任何数量的过渡表达式，它定义要执行的操作，同步或异步，以及选择的原产地/来源和目标状态的过渡应适用的，和警卫来确定合适的过渡聘请。<br>Before an object undergoes a state change, it examines the transition expressions available for the given origin and target, and selects one to be enacted. To test each expression, its origin state is validated against its admit transition guards, and its target state is validated against its release transition guards. The object then instantiates a Transition based on the first valid transition expression it encounters, or, if no transition expression is available, a generic actionless Transition.<br>对象经历一个状态的改变之前，它会检查过渡表达式对于源状态和目标状态是否可用，并选择一个制定。要测试每个表达式，它的起源状态进行验证针对其承认过渡卫士，并将其目标状态及其对过渡释放警卫进行了验证。该对象，然后实例化基于它遇到的第一个有效的过渡表达一个过渡，或者，如果没有过渡表达式是可用的，一个通用的无为过渡。<br>Where transition expressions should be situated in the state hierarchy is largely a matter of discretion. In determining the appropriate transition expression for a given origin–target pairing, the search proceeds, in order:<br>过渡表达式在状态层次的设置应该非常慎重。<br>1.at 过渡表达式的<code>target</code>状态(CSS3过渡是相对于类声明的方式)<br>2.at 过渡表达式的<code>origin</code>状态<br>progressively up the superstate chain of target<br>progressively up the superstate chain of origin<br>Transitions can therefore be organized in a variety of ways, but ambiguity resolution is regular and predictable, as demonstrated with the Zig transition in the example below:<br>过渡可以实现为不同的方式，但是这是有规律并且可预测的，如示例中<code>Zig</code>过渡<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 violet_day
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/mobile.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>





<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  </div>
</body>
</html>